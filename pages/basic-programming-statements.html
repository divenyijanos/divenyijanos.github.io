<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Basic programming&nbsp;statements</title>
        <link rel="stylesheet" href="../theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">János K. Divényi </a></h1>
                <nav><ul>
                    <li><a href="../pages/about-me.html">about&nbsp;me</a></li>
                    <li><a href="../pages/research.html">research</a></li>
                    <li><a href="../pages/teaching.html">teaching</a></li>
                    <li><a href="../category/blog.html">blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
    <h1 class="entry-title">Basic programming&nbsp;statements</h1>
    
    <h2>Practical&nbsp;issues</h2>
<p>R automatically saves the command history. You can find it in the
Rhistory file in your home directory (open Rstudio, issue <code>getwd()</code> and you get
the path to your home&nbsp;directory).</p>
<p>Otherwise, it is usually a good practice to write a script instead of always
typing the commands interactively in the console. Open a new R script file, and
you get a window with an empty file. This makes it possible to write the
commands first, and run them afterwards whenever you want. <code>Ctrl</code>+<code>Enter</code> sends
the active line into the console, while <code>Ctrl</code>+<code>Shift</code>+<code>Enter</code> sends the whole
script into the console. You can save the sript file (extension is <code>.R</code>) to
have access to it later later as&nbsp;well.</p>
<h2>Conditionals</h2>
<p>Sometimes it is useful to make the commands <strong>conditional</strong> on something. &#8220;If it
rains, bring umbrella, else do not.&#8221; The same logic could be easily implemented
in any programming&nbsp;language.</p>
<div class="highlight"><pre><span></span>x <span class="o">&lt;-</span> <span class="m">3</span>
<span class="kr">if</span> <span class="p">(</span>x <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span>
    <span class="kp">print</span><span class="p">(</span><span class="s">&quot;x is larger than 3&quot;</span><span class="p">)</span>
<span class="p">}</span> <span class="kr">else</span> <span class="p">{</span>
    <span class="kp">print</span><span class="p">(</span><span class="s">&quot;x is not larger than 3&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>


<div class="highlight"><pre><span></span>## [1] &quot;x is not larger than 3&quot;
</pre></div>


<h2>Loops</h2>
<p>Sometimes we would like to do the same thing for many objects. We could issue
the same command over and over again, but that is really prone to errors. It is
better to use a <strong>loop</strong>.</p>
<p>For example, how to count the first 1000 numbers? One way is to issue
<code>1 + 2 + 3 + ... + 1000</code> but that is really cumbersome. Let&#8217;s iterate through
the first 1000 numbers and add&nbsp;them.</p>
<div class="highlight"><pre><span></span>sum <span class="o">&lt;-</span> <span class="m">0</span>
<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">1000</span><span class="p">)</span> <span class="p">{</span>
    sum <span class="o">&lt;-</span> sum <span class="o">+</span> i
<span class="p">}</span>
<span class="kp">sum</span>
</pre></div>


<div class="highlight"><pre><span></span>## [1] 500500
</pre></div>


<p>(In R you can get the same result by simply issue <code>sum(1:1000)</code>, but you get the&nbsp;logic.)</p>
<p>What if you want to add the first 2000&nbsp;numbers?</p>
<h2>Functions</h2>
<p>You can write your <strong>own function</strong> as well. Function is an object itself, so
you can assign a name to it with the same assignment&nbsp;operator.</p>
<div class="highlight"><pre><span></span>add_first_n_numbers <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>n<span class="p">)</span> <span class="p">{</span>
    sum <span class="o">&lt;-</span> <span class="m">0</span>
    <span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>n<span class="p">)</span> <span class="p">{</span>
        sum <span class="o">&lt;-</span> sum <span class="o">+</span> i
    <span class="p">}</span>
    <span class="kr">return</span><span class="p">(</span><span class="kp">sum</span><span class="p">)</span>
<span class="p">}</span>


add_first_n_numbers
</pre></div>


<div class="highlight"><pre><span></span><span class="c1">## function(n) {</span>
<span class="c1">##     sum &lt;- 0</span>
<span class="c1">##     for (i in 1:n) {</span>
<span class="c1">##         sum &lt;- sum + i</span>
<span class="c1">##     }</span>
<span class="c1">##     return(sum)</span>
<span class="c1">## }</span>
</pre></div>


<div class="highlight"><pre><span></span>add_first_n_numbers<span class="p">(</span><span class="m">1000</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## [1] 500500
</pre></div>


<div class="highlight"><pre><span></span>add_first_n_numbers<span class="p">(</span><span class="m">2000</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## [1] 2001000
</pre></div>


<p>Functions are easily&nbsp;testable.</p>
<div class="highlight"><pre><span></span>is_larger_than_three <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>number<span class="p">)</span> <span class="p">{</span>
    <span class="kr">if</span> <span class="p">(</span>number <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span>
        <span class="kp">print</span><span class="p">(</span><span class="s">&quot;number is larger than 3&quot;</span><span class="p">)</span>
    <span class="p">}</span> <span class="kr">else</span> <span class="p">{</span>
        <span class="kp">print</span><span class="p">(</span><span class="s">&quot;number is not larger than 3&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="kp">print</span><span class="p">(</span>i<span class="p">)</span>
    is_larger_than_three<span class="p">(</span>i<span class="p">)</span>
<span class="p">}</span>
</pre></div>


<div class="highlight"><pre><span></span>## [1] 1
## [1] &quot;number is not larger than 3&quot;
## [1] 2
## [1] &quot;number is not larger than 3&quot;
## [1] 3
## [1] &quot;number is not larger than 3&quot;
## [1] 4
## [1] &quot;number is larger than 3&quot;
## [1] 5
## [1] &quot;number is larger than 3&quot;
## [1] 6
## [1] &quot;number is larger than 3&quot;
## [1] 7
## [1] &quot;number is larger than 3&quot;
## [1] 8
## [1] &quot;number is larger than 3&quot;
## [1] 9
## [1] &quot;number is larger than 3&quot;
## [1] 10
## [1] &quot;number is larger than 3&quot;
</pre></div>


<p>(Again, this task could be solved easier by <code>(1:10 &gt; 3)</code>, but the point is to
illustrate. how functions, loops and conditionals work. Later, we are going to
see more complicated examples as&nbsp;well.)</p>
<p>Sometimes it makes sense to store the result of each iteration of a loop.
In this cases, <code>lapply()</code> is your friend. This function takes a list and a
function as input, applies the function on to each element of the list and
returns the result in a&nbsp;list.</p>
<div class="highlight"><pre><span></span>my_result <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> is_larger_than_three<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## [1] &quot;number is not larger than 3&quot;
## [1] &quot;number is not larger than 3&quot;
## [1] &quot;number is not larger than 3&quot;
## [1] &quot;number is larger than 3&quot;
## [1] &quot;number is larger than 3&quot;
## [1] &quot;number is larger than 3&quot;
## [1] &quot;number is larger than 3&quot;
## [1] &quot;number is larger than 3&quot;
## [1] &quot;number is larger than 3&quot;
## [1] &quot;number is larger than 3&quot;
</pre></div>


<div class="highlight"><pre><span></span>str<span class="p">(</span>my_result<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## List of 10
##  $ : chr &quot;number is not larger than 3&quot;
##  $ : chr &quot;number is not larger than 3&quot;
##  $ : chr &quot;number is not larger than 3&quot;
##  $ : chr &quot;number is larger than 3&quot;
##  $ : chr &quot;number is larger than 3&quot;
##  $ : chr &quot;number is larger than 3&quot;
##  $ : chr &quot;number is larger than 3&quot;
##  $ : chr &quot;number is larger than 3&quot;
##  $ : chr &quot;number is larger than 3&quot;
##  $ : chr &quot;number is larger than 3&quot;
</pre></div>


<p>You can define the function within <code>lapply()</code></p>
<div class="highlight"><pre><span></span>my_result <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>x <span class="o">+</span> <span class="m">1</span><span class="p">})</span>
str<span class="p">(</span>my_result<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## List of 10
##  $ : num 2
##  $ : num 3
##  $ : num 4
##  $ : num 5
##  $ : num 6
##  $ : num 7
##  $ : num 8
##  $ : num 9
##  $ : num 10
##  $ : num 11
</pre></div>


<h2>Exercise</h2>
<p>Write a function which gives the first n square&nbsp;numbers.</p>
<div class="highlight"><pre><span></span><span class="c1"># Version 1 (returns list)</span>
square_numbers <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>n<span class="p">)</span> <span class="p">{</span>
    <span class="kp">lapply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span>n<span class="p">,</span> <span class="kr">function</span><span class="p">(</span>i<span class="p">)</span> i<span class="o">^</span><span class="m">2</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Version 2 (returns vector)</span>
square_numbers <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>n<span class="p">)</span> <span class="p">{</span>
    square_numbers <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">()</span>
    <span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span>n<span class="p">)</span> <span class="p">{</span>
        square_numbers <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span>square_numbers<span class="p">,</span> i<span class="o">^</span><span class="m">2</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kr">return</span><span class="p">(</span>square_numbers<span class="p">)</span>
<span class="p">}</span>
</pre></div>


<h2>Load in a raw data&nbsp;file</h2>
<p>You have more options (as always in&nbsp;R):</p>
<ul>
<li>use function <code>read.csv()</code></li>
<li>click &#8220;Tools/Import Dataset/From Text File&#8230;&#8221;: this essentially issues the
  <code>read.csv()</code> command</li>
<li>take a look at package <code>readr</code>, and use its <code>read_csv()</code> command (it has some
  advantages over the simple <code>read.csv()</code>: it is faster, it does not convert
  characters to strings automatically,&nbsp;etc.)</li>
</ul>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="">This webpage is still under construction.</a></li>
                            <li><a href="">Please excuse any incoherence or roughness.</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://github.com/divenyijanos">GitHub</a></li>
                            <li><a href="http://hu.linkedin.com/in/janosdivenyi">LinkedIn</a></li>
                            <li><a href="http://stackoverflow.com/users/3409615/janosdivenyi">Stack Overflow</a></li>
                            <li><a href="https://twitter.com/divenyijanos">Twitter</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-85196661-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>