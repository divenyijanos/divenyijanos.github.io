
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="../theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="../theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="../theme/font-awesome/css/font-awesome.min.css">

    <link href="../static/custom.css" rel="stylesheet">



    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#333333">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#333333">
    <!-- iOS Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="author" content="János K. Divényi" />
    <meta name="description" content="" />
<meta property="og:site_name" content="Divenyi"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="Divenyi"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content=".."/>
<meta property="og:image" content="../images/divenyi_circle_small.png">

  <title>Divenyi &ndash; Visualization in&nbsp;R</title>

</head>
<body>
  <aside>
    <div>
      <a href="..">
        <img src="../images/divenyi_circle_small.png" alt="János K. Divényi" title="János K. Divényi">
      </a>
      <h1><a href="..">János K. Divényi</a></h1>

<p>data scientist</p>
      <nav>
        <ul class="list">
          <li><a href="../pages/about-me.html#about-me">about&nbsp;me</a></li>
          <li><a href="../pages/research.html#research">research</a></li>
          <li><a href="../pages/talks.html#talks">talks</a></li>
          <li><a href="../pages/teaching.html#teaching">teaching</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-linkedin" href="http://hu.linkedin.com/in/janosdivenyi" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-twitter" href="https://twitter.com/divenyijanos" target="_blank"><i class="fa fa-twitter"></i></a></li>
        <li><a class="sc-github" href="https://github.com/divenyijanos" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-stack-overflow" href="https://stackoverflow.com/users/3409615/janosdivenyi" target="_blank"><i class="fa fa-stack-overflow"></i></a></li>
      </ul>
    </div>


  </aside>
  <main>


<article class="single">
  <header>
    <h1 id="visualization-in-r">Visualization in&nbsp;R</h1>
  </header>
  <div>
    <h2>Base-R&nbsp;graphs</h2>
<div class="highlight"><pre><span></span><span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>height_weight <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;/home/divenyijanos/Dropbox/teaching/Programming_Tools/Fall2015/Data/height_weight.csv&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Warning in file(file, &quot;rt&quot;): cannot open file &#39;/home/divenyijanos/Dropbox/
## teaching/Programming_Tools/Fall2015/Data/height_weight.csv&#39;: No such file
## or directory
</pre></div>


<div class="highlight"><pre><span></span>## Error in file(file, &quot;rt&quot;): cannot open the connection
</pre></div>


<div class="highlight"><pre><span></span>height_weight <span class="o">&lt;-</span> filter<span class="p">(</span>height_weight<span class="p">,</span> <span class="m">100</span> <span class="o">&lt;</span> height<span class="p">,</span> height <span class="o">&lt;</span> <span class="m">250</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in filter(height_weight, 100 &lt; height, height &lt; 250): object &#39;height_weight&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>plot<span class="p">(</span>height_weight<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in plot(height_weight): object &#39;height_weight&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>plot<span class="p">(</span>height_weight<span class="o">$</span>height<span class="p">,</span> height_weight<span class="o">$</span>weight<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in plot(height_weight$height, height_weight$weight): object &#39;height_weight&#39; not found
</pre></div>


<h2>Package&nbsp;ggplot2</h2>
<p><code>ggplot2</code> is a package developed by Hadley Wickham (so part of the &#8220;hadleyverse&#8221;).
It is powerful visualization tool for R which is built upon the logic of
<a href="http://vita.had.co.nz/papers/layered-grammar.pdf">grammar of graphics</a>.</p>
<p>Most of the basic plots could be created by the &#8220;quick-plot&#8221; command <code>qplot()</code>.</p>
<div class="highlight"><pre><span></span><span class="c1"># install.packages(&quot;ggplot2&quot;)</span>
<span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
qplot<span class="p">(</span>height<span class="p">,</span> weight<span class="p">,</span> data <span class="o">=</span> height_weight<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data, aesthetics, environment = env): object &#39;height_weight&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>qplot<span class="p">(</span>height<span class="p">,</span> data <span class="o">=</span> height_weight<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in eval(aesthetics$x, data, env): object &#39;height_weight&#39; not found
</pre></div>


<p>Quick-plot could be customized&nbsp;easily.</p>
<div class="highlight"><pre><span></span>qplot<span class="p">(</span>height<span class="p">,</span> weight<span class="p">,</span> data <span class="o">=</span> height_weight<span class="p">,</span> color <span class="o">=</span> <span class="s">&quot;darkred&quot;</span><span class="p">,</span> size <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data, aesthetics, environment = env): object &#39;height_weight&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>qplot<span class="p">(</span>height<span class="p">,</span> weight<span class="p">,</span> data <span class="o">=</span> height_weight<span class="p">,</span> color <span class="o">=</span> <span class="s">&quot;darkred&quot;</span><span class="p">,</span> size <span class="o">=</span> <span class="m">3</span><span class="p">,</span> facets <span class="o">=</span> <span class="o">~</span> male<span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data, aesthetics, environment = env): object &#39;height_weight&#39; not found
</pre></div>


<p>For complicated graphics, it is better to use the standard <code>ggplot()</code> formulation,
which makes the underlying logic more explicit. What is behind a plot? We map
different collections of data to different characteristics of a plot and use
different visual elements to show them. In the graph above, we map the data
about heigths to the x axis of the plot, the weights to the y axis (aesthetics),
and use points to make them appear&nbsp;(geometries).</p>
<div class="highlight"><pre><span></span>g <span class="o">&lt;-</span> ggplot<span class="p">(</span>data <span class="o">=</span> height_weight<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> height<span class="p">,</span> y <span class="o">=</span> weight<span class="p">))</span> <span class="o">+</span> geom_point<span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data = height_weight, aes(x = height, y = weight)): object &#39;height_weight&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>g
</pre></div>


<div class="highlight"><pre><span></span>## Error in eval(expr, envir, enclos): object &#39;g&#39; not found
</pre></div>


<p>We can customize the geometries by setting the&nbsp;options.</p>
<div class="highlight"><pre><span></span>g <span class="o">&lt;-</span> ggplot<span class="p">(</span>data <span class="o">=</span> height_weight<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> height<span class="p">,</span> y <span class="o">=</span> weight<span class="p">))</span> <span class="o">+</span> 
    geom_point<span class="p">(</span>size <span class="o">=</span> <span class="m">3</span><span class="p">,</span> color <span class="o">=</span> <span class="s">&quot;darkred&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data = height_weight, aes(x = height, y = weight)): object &#39;height_weight&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>g
</pre></div>


<div class="highlight"><pre><span></span>## Error in eval(expr, envir, enclos): object &#39;g&#39; not found
</pre></div>


<p>We can modify the general properties of the&nbsp;graph.</p>
<div class="highlight"><pre><span></span>g <span class="o">+</span> xlab<span class="p">(</span><span class="s">&quot;Height (cm)&quot;</span><span class="p">)</span> <span class="o">+</span> ylab<span class="p">(</span><span class="s">&quot;Weight (kg)&quot;</span><span class="p">)</span> <span class="o">+</span> ggtitle<span class="p">(</span><span class="s">&quot;Height vs weight&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in eval(expr, envir, enclos): object &#39;g&#39; not found
</pre></div>


<p>This formulation is great as it is really flexible. What if we would like to use
different colors for males and females. This essentially requires the mapping
of the male variable to the color of the&nbsp;points.</p>
<div class="highlight"><pre><span></span>ggplot<span class="p">(</span>data <span class="o">=</span> height_weight<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> height<span class="p">,</span> y <span class="o">=</span> weight<span class="p">,</span> color <span class="o">=</span> male<span class="p">))</span> <span class="o">+</span> 
    geom_point<span class="p">(</span>size <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data = height_weight, aes(x = height, y = weight, color = male)): object &#39;height_weight&#39; not found
</pre></div>


<p>Here, factors help a lot. They show that our variable is categorical and could
take only two&nbsp;values.</p>
<div class="highlight"><pre><span></span>ggplot<span class="p">(</span>data <span class="o">=</span> height_weight<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> height<span class="p">,</span> y <span class="o">=</span> weight<span class="p">,</span> color <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span>male<span class="p">)))</span> <span class="o">+</span> 
    geom_point<span class="p">(</span>size <span class="o">=</span> <span class="m">3</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data = height_weight, aes(x = height, y = weight, color = factor(male))): object &#39;height_weight&#39; not found
</pre></div>


<p>What if we would like to add a fitted line to the points? We could just add a
new layer to the&nbsp;plot.</p>
<div class="highlight"><pre><span></span>g <span class="o">+</span> geom_smooth<span class="p">()</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in eval(expr, envir, enclos): object &#39;g&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>g <span class="o">+</span> geom_smooth<span class="p">(</span>method <span class="o">=</span> <span class="s">&quot;lm&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in eval(expr, envir, enclos): object &#39;g&#39; not found
</pre></div>


<p>By carefully controlling the aesthetics of different geometries, we can fit the
line either to each points or separately by&nbsp;gender.</p>
<div class="highlight"><pre><span></span>ggplot<span class="p">(</span>data <span class="o">=</span> height_weight<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> height<span class="p">,</span> y <span class="o">=</span> weight<span class="p">,</span> color <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span>male<span class="p">)))</span> <span class="o">+</span> 
    geom_point<span class="p">(</span>size <span class="o">=</span> <span class="m">3</span><span class="p">)</span> <span class="o">+</span>
    geom_smooth<span class="p">(</span>method <span class="o">=</span> <span class="s">&quot;lm&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data = height_weight, aes(x = height, y = weight, color = factor(male))): object &#39;height_weight&#39; not found
</pre></div>


<div class="highlight"><pre><span></span>ggplot<span class="p">(</span>data <span class="o">=</span> height_weight<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> height<span class="p">,</span> y <span class="o">=</span> weight<span class="p">))</span> <span class="o">+</span> 
    geom_point<span class="p">(</span>aes<span class="p">(</span>color <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span>male<span class="p">)),</span> size <span class="o">=</span> <span class="m">3</span><span class="p">)</span> <span class="o">+</span>
    geom_smooth<span class="p">(</span>method <span class="o">=</span> <span class="s">&quot;lm&quot;</span><span class="p">)</span>
</pre></div>


<div class="highlight"><pre><span></span>## Error in ggplot(data = height_weight, aes(x = height, y = weight)): object &#39;height_weight&#39; not found
</pre></div>


<p><a href="https://ramnathv.github.io/pycon2014-r/visualize/ggplot2.html">Here</a> is a
really good tutorial of the <code>ggplot2</code> package and the grammar of graphics.
It is also worth looking at the <a href="http://docs.ggplot2.org/current/">documentation</a>
which summarises all of the available options with lots of&nbsp;examples.</p>
  </div>
</article>

    <footer>
<p>&copy; János K. Divényi </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85196661-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Divenyi ",
  "url" : "..",
  "image": "../images/divenyi_circle_small.png",
  "description": ""
}
</script>
</body>
</html>